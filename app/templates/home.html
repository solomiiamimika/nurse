{# templates/home.html #}
{% extends "base.html" %}

{% block content %}

<style>
    /* --- THEME OVERRIDES FOR LANDING --- */
    body {
        background-color: #fff0f3; 
        background-image: linear-gradient(180deg, #fff0f3 0%, #ffffff 100%);
        background-attachment: fixed;
    }

    .landing-wrapper {
        overflow-x: hidden;
    }

    /* --- HERO SECTION --- */
    .hero-section {
        position: relative;
        padding: 60px 20px 80px;
        min-height: 85vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background-image: url('https://www.transparenttextures.com/patterns/cubes.png');
        background-blend-mode: multiply;
    }

    .hero-content-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 40px;
        max-width: 1200px;
        width: 100%;
        z-index: 2;
    }

    @media (min-width: 992px) {
        .hero-content-wrapper {
            flex-direction: row;
            justify-content: space-between;
            align-items: flex-start;
        }
        .hero-text {
            text-align: left;
            max-width: 50%;
            padding-top: 40px;
        }
        .hero-widget-container {
            width: 450px;
            /* –§—ñ–∫—Å—É—î–º–æ –≤–∏—Å–æ—Ç—É, —â–æ–± –≤—ñ–¥–∂–µ—Ç –Ω–µ "—Å—Ç—Ä–∏–±–∞–≤" –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–Ω—Ç–µ–Ω—Ç—É, –∞–±–æ min-height */
            min-height: 500px; 
        }
    }

    .hero-title {
        font-size: 3.5rem;
        font-weight: 800;
        color: var(--text-dark);
        line-height: 1.1;
        margin-bottom: 20px;
    }
    
    .hero-title span {
        color: var(--primary-green);
    }

    .hero-subtitle {
        font-size: 1.25rem;
        color: var(--text-gray);
        margin-bottom: 30px;
    }

    /* --- WIDGET STYLES --- */
    .booking-widget {
        background: white;
        border-radius: 24px;
        padding: 30px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.08);
        border: 1px solid rgba(0,0,0,0.05);
        position: relative;
        overflow: hidden;
        transition: height 0.3s ease;
    }

    .widget-tabs {
        display: flex;
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
    }

    .widget-tab {
        padding: 10px 20px;
        cursor: pointer;
        font-weight: 600;
        color: var(--text-gray);
        border-bottom: 3px solid transparent;
        transition: 0.3s;
        flex: 1;
        text-align: center;
    }

    .widget-tab:hover {
        background-color: #f8f9fa;
    }

    .widget-tab.active {
        color: var(--text-dark);
        border-bottom-color: var(--primary-green);
    }

    .input-group-styled {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 12px 15px;
        margin-bottom: 15px;
        border: 1px solid transparent;
        transition: 0.3s;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .input-group-styled:focus-within {
        background: white;
        border-color: var(--text-dark);
        box-shadow: 0 0 0 4px rgba(0,0,0,0.05);
    }

    .input-clean {
        border: none;
        background: transparent;
        width: 100%;
        outline: none;
        font-weight: 600;
        font-size: 1rem;
        color: var(--text-dark);
    }

    .btn-block-action {
        width: 100%;
        background: var(--text-dark);
        color: white;
        padding: 16px;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 700;
        border: none;
        cursor: pointer;
        transition: 0.3s;
        margin-top: 10px;
    }

    .btn-block-action:hover {
        background: #000;
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }

    /* --- FAKE RESULTS STYLES --- */
    .provider-result-card {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        border-bottom: 1px solid #f0f0f0;
        animation: fadeIn 0.5s ease;
    }
    
    .provider-result-card:last-child {
        border-bottom: none;
    }

    .provider-avatar {
        width: 50px;
        height: 50px;
        background: #eee;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: #888;
    }

    .book-btn-sm {
        background: var(--primary-green);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s;
        white-space: nowrap;
    }
    .book-btn-sm:hover { background: #19a463; }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Helper utility */
    .hidden { display: none !important; }

    /* --- DECORATIVE --- */
    .floating-badge {
        position: absolute;
        background: white;
        padding: 10px 20px;
        border-radius: 50px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
        font-size: 0.9rem;
        animation: float 6s ease-in-out infinite;
        z-index: 1;
    }
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-15px); }
        100% { transform: translateY(0px); }
    }

    .section-container {
        padding: 80px 20px;
        max-width: 1200px;
        margin: 0 auto;
    }
    .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }
    .category-card {
        background: white; 
        border: none;
        box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        border-radius: 16px;
        padding: 25px;
        text-align: center;
        transition: 0.3s;
        cursor: pointer;
    }
    .category-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
    .cat-icon-circle {
        width: 60px; height: 60px;
        background: #fff0f3; color: var(--text-dark);
        border-radius: 50%; margin: 0 auto 15px;
        display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
    }
</style>

<div class="landing-wrapper">
    <div class="hero-section">
        
        <div class="floating-badge" style="top: 15%; left: 5%;">
            <i class="fas fa-user-md" style="color: var(--primary-green)"></i> 500+ Providers
        </div>
        <div class="floating-badge" style="bottom: 15%; right: 5%; animation-delay: 1s;">
            <i class="fas fa-shield-alt" style="color: var(--primary-green)"></i> Verified
        </div>

        <div class="hero-content-wrapper">
            <div class="hero-text">
                <h1 class="hero-title">Care that comes <br>to <span>you.</span></h1>
                <p class="hero-subtitle">
                    {{ _("Instant access to verified providers, physiotherapists, and caregivers near you. No calls, just clicks.") }}
                </p>
                
                <div class="d-flex gap-3 align-items-center mb-4">
                    <div class="d-flex align-items-center gap-2">
                        <i class="fas fa-star text-warning"></i>
                        <strong>4.9/5</strong> <span class="text-muted small">Rating</span>
                    </div>
                    <div style="width: 1px; height: 20px; background: #ddd;"></div>
                    <div class="d-flex align-items-center gap-2">
                        <i class="fas fa-check-circle text-success"></i>
                        <strong>100%</strong> <span class="text-muted small">Verified</span>
                    </div>
                </div>
            </div>

            <div class="hero-widget-container">
                <div class="booking-widget">
                    
                    <div id="step-search">
                        <div class="widget-tabs">
                            <div class="widget-tab active" onclick="switchTab(this, 'visit')">{{ _("Book a Visit") }}</div>
                      
                        </div>

                        <div class="input-group-styled">
                            <i class="fas fa-stethoscope"></i>
                            <select class="input-clean" id="fakeService">
                                <option value="" disabled selected>{{ _("Choose service") }}</option>
                                <option value="nurse">{{ _("Home Injection") }}</option>
                                <option value="physio">{{ _("Physiotherapy") }}</option>
                                <option value="baby">{{ _("Baby Sitter") }}</option>
                                <option value="elder">{{ _("Elderly Care") }}</option>
                            </select>
                        </div>

                        <div class="input-group-styled">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" class="input-clean" placeholder="{{ _('Enter your address') }}" id="fakeLocation">
                            <i class="fas fa-location-arrow" style="font-size: 0.9rem; cursor: pointer; color: var(--primary-green);"></i>
                        </div>

                        <div class="input-group-styled">
                            <i class="fas fa-clock"></i>
                            <select class="input-clean">
                                <option>{{ _("As soon as possible") }}</option>
                                <option>{{ _("Today, later") }}</option>
                                <option>{{ _("Tomorrow") }}</option>
                            </select>
                        </div>

                        <button type="button" class="btn-block-action" id="searchBtn" onclick="simulateSearch()">
                            {{ _("See Prices & Book") }}
                        </button>
                    </div>

                    <div id="step-results" class="hidden">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="mb-0 fw-bold">{{ _("Providers nearby") }}</h6>
                            <small class="text-muted" style="cursor: pointer; text-decoration: underline;" onclick="resetSearch()">{{ _("Change") }}</small>
                        </div>

                        <div class="results-list">
                            <div class="provider-result-card">
                                <div class="provider-avatar" style="background: #e3f2fd; color: #0d6efd;">
                                    <i class="fas fa-user-nurse"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div class="fw-bold">Maria K.</div>
                                    <div class="small text-muted"><i class="fas fa-star text-warning"></i> 5.0 (24 reviews)</div>
                                    <div class="small fw-bold mt-1">~ 20.00 ‚Ç¨</div>
                                </div>
                                <button class="book-btn-sm" onclick="redirectToRegister('Maria K.')">{{ _("Book") }}</button>
                            </div>

                            <div class="provider-result-card">
                                <div class="provider-avatar" style="background: #e8f5e9; color: #198754;">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div class="fw-bold">Dr. Alex P.</div>
                                    <div class="small text-muted"><i class="fas fa-star text-warning"></i> 4.9 (10 reviews)</div>
                                    <div class="small fw-bold mt-1">~ 35.00 ‚Ç¨</div>
                                </div>
                                <button class="book-btn-sm" onclick="redirectToRegister('Dr. Alex P.')">{{ _("Book") }}</button>
                            </div>

                             <div class="provider-result-card">
                                <div class="provider-avatar" style="background: #fff3cd; color: #ffc107;">
                                    <i class="fas fa-hands-helping"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div class="fw-bold">Sarah T.</div>
                                    <div class="small text-muted"><i class="fas fa-star text-warning"></i> 4.8 (115 reviews)</div>
                                    <div class="small fw-bold mt-1">~ 15.00 ‚Ç¨</div>
                                </div>
                                <button class="book-btn-sm" onclick="redirectToRegister('Sarah T.')">{{ _("Book") }}</button>
                            </div>
                        </div>

                        <div class="text-center mt-3 pt-2 border-top">
                            <small class="text-muted">{{ _("Viewing 3 of 12 providers") }}</small>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

    <div class="section-container">
        <h3 class="text-center mb-5" style="font-weight: 800;">{{ _("Top Services") }}</h3>
        
        <div class="category-grid">
            <div class="category-card" onclick="document.getElementById('fakeService').value='nurse'; window.scrollTo({top:0, behavior:'smooth'});">
                <div class="cat-icon-circle"><i class="fas fa-user-md"></i></div>
                <h6 class="mb-1">{{ _("Injection") }}</h6>
                <small class="text-muted">{{ _("From 15‚Ç¨") }}</small>
            </div>
            <div class="category-card" onclick="document.getElementById('fakeService').value='nurse'; window.scrollTo({top:0, behavior:'smooth'});">
                <div class="cat-icon-circle"><i class="fas fa-band-aid"></i></div>
                <h6 class="mb-1">{{ _("Dressing") }}</h6>
                <small class="text-muted">{{ _("From 20‚Ç¨") }}</small>
            </div>
            <div class="category-card" onclick="document.getElementById('fakeService').value='physio'; window.scrollTo({top:0, behavior:'smooth'});">
                <div class="cat-icon-circle"><i class="fas fa-running"></i></div>
                <h6 class="mb-1">{{ _("Physio") }}</h6>
                <small class="text-muted">{{ _("From 40‚Ç¨") }}</small>
            </div>
            <div class="category-card" onclick="document.getElementById('fakeService').value='baby'; window.scrollTo({top:0, behavior:'smooth'});">
                <div class="cat-icon-circle"><i class="fas fa-baby"></i></div>
                <h6 class="mb-1">{{ _("Baby Care") }}</h6>
                <small class="text-muted">{{ _("From 12‚Ç¨/h") }}</small>
            </div>
        </div>
    </div>

    <div style="background: white; padding: 80px 0;">
        <div class="section-container">
            <div class="row align-items-center">
                <div class="col-md-5">
                    <h2 class="mb-4" style="font-weight: 800;">{{ _("Easy as ordering a pizza.") }}</h2>
                    <p class="text-muted mb-4">{{ _("We simplified medical care. No more waiting on the phone or traveling to clinics for simple procedures.") }}</p>
                    <a href="{{ url_for('auth.register') }}" class="btn btn-outline-dark rounded-pill px-4">{{ _("Get Started") }}</a>
                </div>
                <div class="col-md-7">
                     <div class="d-flex gap-4 mt-4 mt-md-0 justify-content-center text-center">
                         <div>
                             <div style="font-size: 2rem; margin-bottom: 10px;">üìç</div>
                             <h6 class="fw-bold">{{ _("1. Set Location") }}</h6>
                         </div>
                         <div style="color: #ddd; font-size: 2rem;">‚Üí</div>
                         <div>
                             <div style="font-size: 2rem; margin-bottom: 10px;">üë®‚Äç‚öïÔ∏è</div>
                             <h6 class="fw-bold">{{ _("2. Choose Provider") }}</h6>
                         </div>
                         <div style="color: #ddd; font-size: 2rem;">‚Üí</div>
                         <div>
                             <div style="font-size: 2rem; margin-bottom: 10px;">‚úÖ</div>
                             <h6 class="fw-bold">{{ _("3. Relax") }}</h6>
                         </div>
                     </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="section-container text-center pb-5">
        <div style="background: var(--text-dark); color: white; border-radius: 24px; padding: 50px 20px;">
            <h2>{{ _("Are you a service provider?") }}</h2>
            <p class="text-white-50 mb-4">{{ _("Join thousands of providers earning on their own schedule.") }}</p>
            <a href="{{ url_for('auth.register') }}" class="btn btn-light rounded-pill px-5 fw-bold">{{ _("Join as a Professional") }}</a>
        </div>
    </div>

</div>

{% endblock %}

{% block scripts %}
<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js"></script>
<script src="https://files.bpcontent.cloud/2026/01/10/13/20260110130650-79OB48AX.js" defer></script>
<script>
    // Tab switching logic
    function switchTab(el, type) {
        document.querySelectorAll('.widget-tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        // Visual feedback only, logic is the same for demo
    }

    // Simulate searching for providers
    function simulateSearch() {
        const btn = document.getElementById('searchBtn');
        const originalText = btn.innerText;
        const step1 = document.getElementById('step-search');
        const step2 = document.getElementById('step-results');

        // Loading state
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> {{ _("Searching nearby...") }}';
        btn.style.opacity = '0.8';
        btn.disabled = true;

        // Fake delay
        setTimeout(() => {
            step1.classList.add('hidden');
            step2.classList.remove('hidden');
            
            // Reset button for when user clicks "Change" (go back)
            btn.innerHTML = originalText;
            btn.style.opacity = '1';
            btn.disabled = false;
        }, 1200);
    }

    // Go back to search form
    function resetSearch() {
        document.getElementById('step-results').classList.add('hidden');
        document.getElementById('step-search').classList.remove('hidden');
    }

    // Final redirection to REGISTER
    function redirectToRegister(providerName) {
        // We can pass the provider name or intent to the register page if needed
        window.location.href = "{{ url_for('auth.register') }}?intent=book&provider=" + encodeURIComponent(providerName);
    }

    // FIX FOR INFINITE LOADING WHEN CLICKING "BACK"
    window.onpageshow = function(event) {
        if (event.persisted) {
            // Restore button state if page is loaded from cache
            const btn = document.getElementById('searchBtn');
            if (btn) {
                btn.innerHTML = '{{ _("See Prices & Book") }}';
                btn.disabled = false;
                btn.style.opacity = '1';
            }
        }
    };

    document.addEventListener('DOMContentLoaded', () => {
        const status = document.getElementById('status-message');
        if (status) status.textContent = '';
    });
</script>
{% endblock %}